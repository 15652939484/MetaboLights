<!DOCTYPE html>
<html>
<head>
    <title>Specview unit XML parsing CML</title>
    <script src="../../third-party/closure/closure/goog/base.js"></script>
    <script src="../../specview/deps.js"></script>
    <script src="../data/specData/C8H2NF5.js"></script>
    
    
    <script>
    goog.require('goog.testing.jsunit');
    goog.require('specview.io.SpectrumCMLParser');
    goog.require('specview.model.Molecule');
    goog.require('specview.model.NMRdata');

    </script>
    
    <script>
	    function testC18H17NO4() {
	    	var CmlXmlObject=specview.io.SpectrumCMLParser.parseCML(specC8H2NF5);//XML document
	    	var cmlObject=specview.io.SpectrumCMLParser.CmlXMLtoGraphicalObject(CmlXmlObject);//a cmlObject
	    	cmlObject.createMoleculeObjectOutOfCmlParserObject();//This will set the molecule attribute of the cmlObject so it can be a proper molecule
	    	var molecule=cmlObject.molecule;
	        assertEquals('count atoms', 14, molecule.atoms.length);
	        assertEquals('count bonds', 14, molecule.bonds.length);
	        alert("Molecule name= "+ molecule.name+
	        		"\nNumber of atoms= "+molecule.atoms.length+
	        		"\nNumber of bonds= "+molecule.bonds.length+
	        		"\nNumber of peaks= "+cmlObject.ArrayOfPeaks.length
	        		);
	        for(var k=0;k<molecule.atoms.length;k++){
	        	var innerId=cmlObject.molecule.getAtom(k).innerIdentifier;
	        	alert(cmlObject.molecule.getAtom(k).innerIdentifier+"===reference===>"+
	        			cmlObject.molecule.getAtom(k).peakMap[molecule.getAtom(k).innerIdentifier]+
	        			"\n\n"+cmlObject.molecule.getAtom(k).innerIdentifier+"==>"+cmlObject.ArrayOfAtoms[cmlObject.molecule.getAtom(k).innerIdentifier]+
	        			"\n\n"+cmlObject.molecule.getAtom(k).peakMap[molecule.getAtom(k).innerIdentifier]+"==>"+cmlObject.ArrayOfPeaks[cmlObject.molecule.getAtom(k).peakMap[molecule.getAtom(k).innerIdentifier]]);
	        }
	    }
    </script>
    </head>
    <body>
    </body>
</html>

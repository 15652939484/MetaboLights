metExploreD3.GraphCaption={refreshStyleOfReaction:function(){var a=metExploreD3.getReactionStyle();var b=Math.max(a.getWidth(),a.getHeight());var c=15/b;d3.select("#viz").select("#D3viz").select(".reactionCaption").attr("x",15/2-a.getWidth()*c/2).attr("y",15+15/2-a.getHeight()*c/2).attr("width",a.getWidth()*c).attr("height",a.getHeight()*c).attr("rx",a.getRX()*c).attr("ry",a.getRY()*c).attr("fill","white").attr("transform","translate(15,40)").style("stroke",a.getStrokeColor()).style("stroke-width",2);d3.select("#viz").select("#D3viz").select(".reactionCaptionRev").attr("x",15/2-a.getWidth()*c/2).attr("y",15+15/2-a.getHeight()*c/2).attr("width",a.getWidth()*c).attr("height",a.getHeight()*c).attr("rx",a.getRX()*c).attr("ry",a.getRY()*c).style("stroke-dasharray","2,2").attr("fill","white").attr("transform","translate(15,60)").style("stroke",a.getStrokeColor())},refreshStyleOfMetabolite:function(){var b=metExploreD3.getMetaboliteStyle();var c=Math.max(b.getWidth(),b.getHeight());var a=15/c;d3.select("#viz").select("#D3viz").select(".metaboliteCaption").attr("x",15/2-b.getWidth()*a/2).attr("y",15+15/2-b.getHeight()*a/2).attr("width",b.getWidth()*a).attr("height",b.getHeight()*a).attr("rx",b.getRX()*a).attr("ry",b.getRY()*a).attr("fill","white").style("stroke","black").style("stroke-width",2).attr("transform","translate(15,95)")},drawCaption:function(){var b=metExploreD3.getReactionStyle();var d=Math.max(b.getWidth(),b.getHeight());var f=15/d;var c=metExploreD3.getMetaboliteStyle();var e=Math.max(c.getWidth(),c.getHeight());var a=15/e;d3.select("#viz").select("#D3viz").append("svg:text").attr("id","metexplore").text("metExploreViz").attr("x",$("#viz").width()-130).attr("y",$("#viz").height()-10);d3.select("#viz").select("#D3viz").append("svg:g").attr("class","logoViz").attr("id","logoViz").append("image").attr("xlink:href","resources/icons/metExploreViz_Logo.svg").attr("width","50").attr("height","50").attr("x",$("#viz").width()-110).attr("y",$("#viz").height()-75);d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","reactionCaption").attr("x",15/2-b.getWidth()*f/2).attr("y",15+15/2-b.getHeight()*f/2).attr("width",b.getWidth()*f).attr("height",b.getHeight()*f).attr("rx",b.getRX()*f).attr("ry",b.getRY()*f).attr("fill","white").attr("transform","translate(15,40)").style("stroke",b.getStrokeColor()).style("stroke-width",2);d3.select("#viz").select("#D3viz").append("svg:text").text("Irreversible reaction").attr("x",20).attr("y",15).attr("transform","translate(30,50)");d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","reactionCaptionRev").attr("x",15/2-b.getWidth()*f/2).attr("y",15+15/2-b.getHeight()*f/2).attr("width",b.getWidth()*f).attr("height",b.getHeight()*f).attr("rx",b.getRX()*f).attr("ry",b.getRY()*f).style("stroke-dasharray","2,2").attr("fill","white").attr("transform","translate(15,60)").style("stroke",b.getStrokeColor());d3.select("#viz").select("#D3viz").append("svg:text").text("Reversible reaction").attr("x",20).attr("y",15).attr("transform","translate(30,70)");d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","metaboliteCaption").attr("x",15/2-c.getWidth()*a/2).attr("y",15+15/2-c.getHeight()*a/2).attr("width",c.getWidth()*a).attr("height",c.getHeight()*a).attr("rx",c.getRX()*a).attr("ry",c.getRY()*a).attr("fill","white").style("stroke","black").style("stroke-width",2).attr("transform","translate(15,95)");d3.select("#viz").select("#D3viz").append("svg:text").text("Metabolites in:").attr("x",20).attr("y",15).attr("transform","translate(30,105)");metExploreD3.GraphCaption.colorMetaboliteLegend(140)},colorMetaboliteLegend:function(k){var d=metExploreD3.getReactionStyle();var g=Math.max(d.getWidth(),d.getHeight());var a=20/g;var j=metExploreD3.getMetaboliteStyle();var h=Math.max(j.getWidth(),j.getHeight());var b=20/h;metExploreD3.sortCompartmentInBiosource();var l=metExploreD3.getCompartmentInBiosourceLength();if(l==undefined){l=0}center=128;width=127;frequency=Math.PI*2*0.95/l;var f=k;for(var e=0;e<l;e++){red=Math.sin(frequency*e+2+l)*width+center;green=Math.sin(frequency*e+0+l)*width+center;blue=Math.sin(frequency*e+4+l)*width+center;var c=metExploreD3.getCompartmentInBiosourceSet()[e];c.setColor(metExploreD3.GraphUtils.RGB2Color(red,green,blue));d3.select("#viz").select("#D3viz").append("svg:line").attr("class","metabolite").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0).style("stroke",c.getColor()).style("stroke-width",2).attr("transform","translate(15,"+f+")");f+=10;d3.select("#viz").select("#D3viz").append("svg:text").text(c.getName()).attr("x",20).attr("y",-6).attr("transform","translate(30,"+f+")");f+=10}}};
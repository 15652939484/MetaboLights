<Context className="org.apache.catalina.core.StandardContext"
         cachingAllowed="true"
         charsetMapperClass="org.apache.catalina.util.CharsetMapper"
         crossContext="false"
         debug="1"
         docBase="/nfs/production/panda/metabolights/deploy/metabolights-webapp.war"
         mapperClass="org.apache.catalina.core.StandardContextMapper"
         path="/metabolights"
         privileged="false"
         reloadable="true"
         swallowOutput="true"
         useNaming="true"
         wrapperClass="org.apache.catalina.core.StandardWrapper"
         unpackWAR="true">

    <!-- Stop sessions being recovered from disk on server restart. -->
    <Manager className="org.apache.catalina.session.StandardManager" pathname=""/>

    <Resource name="jdbc/metabolights"
              auth="Container"
              type="javax.sql.DataSource"
              factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
              connectionCacheName="MetaboLightsCache"
              connectionCacheProperties="{ValidateConnection=true}"
              connectionCachingEnabled="true"
              username="xxxxx"
              password="xxxxx"
              driverClassName="oracle.jdbc.OracleDriver"
              url="jdbc:oracle:thin:@host:PORT:SID"
              testWhileIdle="true"
              testOnBorrow="true"
              testOnReturn="true"
              validationQuery="select 1 from dual"
              validationInterval="30000"
              timeBetweenEvictionRunsMillis="5000"
              removeAbandoned="true"
              removeAbandonedTimeout="60"
              maxActive="50"
              maxIdle="10"
              maxWait="-1"/>

    <!-- URL for new account creations, this is included in the emails sent -->
    <Environment name="urlConfirmNewAccount" value="http://wwwdev.ebi.ac.uk/metabolights/confirmAccountRequest" type="java.lang.String"/>
    <Environment name="urlActivateNewAccount" value="http://wwwdev.ebi.ac.uk/metabolights/activateAccount__NotifyUser" type="java.lang.String"/>

    <!-- uploadDirectory is used the by the metabolights-uploader module, for BII submissions -->
    <Environment name="uploadDirectory" value="/nfs/production/panda/metabolights/isatab/upload/" type="java.lang.String"/>

    <!-- ftp locations are used by the metabolights-uploader and metabolights-webapp to distibute submitted archives -->
    <Environment name="publicFtpStageLocation" value="/nfs/public/rw/homes/tc_cm01/studies/public/" type="java.lang.String"/>
    <!--<Environment name="privateFtpStageLocation" value="/nfs/public/rw/homes/tc_cm01/studies/private/" type="java.lang.String"/>-->
    <!--<Environment name="publicFtpLocation" value="/nfs/ftp/pub/databases/metabolights/studies/public/" type="java.lang.String"/>-->
    <ResourceLink  name="publicFtpLocation" global="publicStudiesLocation" type="java.lang.String"/>
    <ResourceLink  name="privateFtpStageLocation" global="privateStudiesLocation" type="java.lang.String"/>
    <!--<Environment name="privateFtpLocation" value="/nfs/ftp/pub/databases/metabolights/studies/private/" type="java.lang.String"/>-->
    <Environment name="ftpServer" value="ftp.ebi.ac.uk" type="java.lang.String"/>
    <Environment name="filebase" value="/ebi/ftp/" type="java.lang.String"/>
    <Environment name="ondemand" value="/nfs/public/rw/homes/tc_cm01/zip_ondemand/" type="java.lang.String"/>
    
    <!-- URLs for the frontier web service -->
    <Environment name="headerURL" value="http://xxx:xxx/web/template-service/prod/templates/compliance/masthead/global/services" type="java.lang.String"/>
	<Environment name="localHeaderURL" value="http://xxx:xxx/web/template-service/prod/templates/compliance/masthead/local" type="java.lang.String"/>
	<Environment name="footerURL" value="http://xxx:xxx/web/template-service/prod/templates/compliance/footer/global" type="java.lang.String"/>

    <!-- This is where the web app looks for the lucene index -->
    <Environment name="luceneIndexDirectory" value="/nfs/public/rw/homes/tc_cm01/lucene/prod/bii/" type="java.lang.String"/>
    <Environment name="luceneIndexDirectoryShort" value="/nfs/public/rw/homes/tc_cm01/lucene/prod/" type="java.lang.String"/>

    <Environment name="ebiServiceURL" value="http://xxx:xxx/ebisearch/service.ebi?wsdl" type="java.lang.String"/>
    <Environment name="EUPMCWebServiceURL" value="http://xxx:xxx/webservices/citexplore/v3.0.1/service?wsdl" type="java.lang.String"/>
    <Environment name="mailServer" value="xxxx" type="java.lang.String"/>
    <Environment name="EBIHost" value="http://www.ebi.ac.uk/metabolights/" type="java.lang.String"/>

    <Environment name="curationEmailAddress" value="xxx@xxx.xx" type="java.lang.String"/>

</Context>

